<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScript,JavaScript高级程序设计,DOM," />










<meta name="description" content="Node类型DOM1级定义了Node接口，该接口由DOM中的所有节点类型实现；Node接口在JavaScript中作为Node类型来实现，除IE外的所有浏览器都可以访问到这个类型；JavaScript中所有节点类型都继承自Node类型，因此所有节点类型都共享着相同的基本属性和方法；每个节点都有nodeType属性，用于表明节点的类型： 123456789101112Node.ELEMENT_NOD">
<meta name="keywords" content="JavaScript,JavaScript高级程序设计,DOM">
<meta property="og:type" content="article">
<meta property="og:title" content="DOM">
<meta property="og:url" content="http://yoursite.com/2017/12/05/dom/index.html">
<meta property="og:site_name" content="ZG-X&#39;s Notes">
<meta property="og:description" content="Node类型DOM1级定义了Node接口，该接口由DOM中的所有节点类型实现；Node接口在JavaScript中作为Node类型来实现，除IE外的所有浏览器都可以访问到这个类型；JavaScript中所有节点类型都继承自Node类型，因此所有节点类型都共享着相同的基本属性和方法；每个节点都有nodeType属性，用于表明节点的类型： 123456789101112Node.ELEMENT_NOD">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-06-11T05:08:49.324Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DOM">
<meta name="twitter:description" content="Node类型DOM1级定义了Node接口，该接口由DOM中的所有节点类型实现；Node接口在JavaScript中作为Node类型来实现，除IE外的所有浏览器都可以访问到这个类型；JavaScript中所有节点类型都继承自Node类型，因此所有节点类型都共享着相同的基本属性和方法；每个节点都有nodeType属性，用于表明节点的类型： 123456789101112Node.ELEMENT_NOD">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/12/05/dom/"/>





  <title>DOM | ZG-X's Notes</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZG-X's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/05/dom/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhiGuang Xiong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZG-X's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">DOM</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-05T19:20:36+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/《JavaScript高级程序设计》读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">《JavaScript高级程序设计》读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Node类型"><a href="#Node类型" class="headerlink" title="Node类型"></a>Node类型</h2><p>DOM1级定义了Node接口，该接口由DOM中的所有节点类型实现；Node接口在JavaScript中作为Node类型来实现，除IE外的所有浏览器都可以访问到这个类型；JavaScript中所有节点类型都继承自Node类型，因此所有节点类型都共享着相同的基本属性和方法；每个节点都有<code>nodeType</code>属性，用于表明节点的类型：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Node.ELEMENT_NODE(<span class="number">1</span>)</span><br><span class="line">Node.ATTRIBUTE_NODE(<span class="number">2</span>)</span><br><span class="line">Node.TEXT_NODE(<span class="number">3</span>)</span><br><span class="line">Node.CDATA_SECTION_NODE(<span class="number">4</span>)</span><br><span class="line">Node.ENTITY_REFERENCE_NODE(<span class="number">5</span>)</span><br><span class="line">Node.ENTITY_NODE(<span class="number">6</span>)</span><br><span class="line">Node.PROCESSING_INSTRUCTION_NODE(<span class="number">7</span>)</span><br><span class="line">Node.COMMENT_NODE(<span class="number">8</span>)</span><br><span class="line">Node.DOCUMENT_NODE(<span class="number">9</span>)</span><br><span class="line">Node.DOCUMENT_TYPE_NODE(<span class="number">10</span>)</span><br><span class="line">Node.DOCUMENT_FRAGMENT_NODE(<span class="number">11</span>)</span><br><span class="line">Node.NOTATION_NODE(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过比较常量，确定节点的类型</span></span><br><span class="line"><span class="keyword">if</span> (someNode.nodeType == Node.ELEMENT_NODE)&#123; <span class="comment">// IE没有公开Node类型的构造函数，在IE中无效</span></span><br><span class="line">  alert(<span class="string">"Node is an element."</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (someNode.nodeType == <span class="number">1</span>)&#123;                 <span class="comment">// 跨浏览器兼容，适用于所有浏览器</span></span><br><span class="line">  alert(<span class="string">"Node is an element."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-nodeName和nodeValue属性"><a href="#1-nodeName和nodeValue属性" class="headerlink" title="1.nodeName和nodeValue属性"></a>1.nodeName和nodeValue属性</h3><p><code>nodeName</code>和<code>nodeValue</code>属性包含有节点的具体信息，属性值完全取决于节点的类型；对于元素节点，<code>nodeName</code>中保存的是元素的标签名，<code>nodeValue</code>的值则始终为<code>null</code>；</p>
<h3 id="2-节点层次"><a href="#2-节点层次" class="headerlink" title="2.节点层次"></a>2.节点层次</h3><ul>
<li>每个节点都有<code>childNodes</code>属性，其中保存着一个<code>NodeList</code>对象，<code>NodeList</code>是类数组对象，保存着一组有序的节点，可以通过位置或<code>item()</code>方法来访问这些节点；<code>NodeList</code>也有<code>length</code>属性，但并不是<code>Array</code>的实例；<code>NodeList</code>对象是基于DOM结构动态执行查询的结果，DOM结构的变化能自动反映在<code>NodeList</code>对象中；<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstChild = someNode.childNodes[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> secondChild = someNode.childNodes.item(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> count = someNode.childNodes.length;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>对<code>arguments</code>对象使用<code>Array.prototype.slice()</code>方法可将其转换为数组，同样的方法也可将<code>NodeList</code>对象转换为数组；<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertToArray</span>(<span class="params">nodes</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> array = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    array = <span class="built_in">Array</span>.prototype.slice.call(nodes, <span class="number">0</span>); <span class="comment">// 针对非IE浏览器</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">    array = <span class="keyword">new</span> <span class="built_in">Array</span>();                          <span class="comment">// 针对IE8及之前版本</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, len=nodes.length; i &lt; len; i++)&#123;</span><br><span class="line">      array.push(nodes[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>每个节点都有<code>parentNode</code>属性，指向文档树中的父节点；</li>
<li>使用<code>childNodes</code>列表中每个节点的<code>previousSibling</code>和<code>nextSibling</code>属性可以访问同一列表中的其他节点，列表中第一个节点的<code>previousSibling</code>属性和最后一个节点的<code>nextSibling</code>属性值为<code>null</code>；</li>
<li>父节点的<code>firstChild</code>和<code>lastChild</code>属性分别指向其<code>childNodes</code>列表中的第一个和最后一个节点；</li>
<li>所有节点都有的<code>ownerDocument</code>属性指向表示整个文档的文档节点；</li>
<li><code>hasChildNodes()</code>方法在节点包含一或多个子节点的情况下返回<code>true</code>；</li>
</ul>
<h3 id="3-操作节点"><a href="#3-操作节点" class="headerlink" title="3.操作节点"></a>3.操作节点</h3><ul>
<li><code>appendChild()</code>用于向<code>childNodes</code>列表的末尾添加一个节点，返回更新完成后新增的节点；若传入<code>appendChild()</code>中的节点已经是文档的一部分，则将该节点从原来的位置转移到新位置；</li>
<li><code>insertBefore()</code>方法用于将节点插入到<code>childNodes</code>列表的特定位置，接受两个参数：要插入的节点和作为参照的节点；插入节点后，被插入节点会变成参照节点的前一个同胞节点，同时被方法返回；若参照节点是<code>null</code>，则与<code>appendChild()</code>执行相同的操作；</li>
<li><code>replaceChild()</code>方法用于替换节点，接受两个参数：要插入的节点和要替换的节点，要替换的节点由该方法返回并从文档树中被移除；</li>
<li><code>removeChild()</code>方法用于移除节点，接受要移除的节点，返回被移除的节点；<code>replaceChild()</code>和<code>removeChild()</code>方法移除的节点仍为文档所有，但文档中已经没有了位置；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// someNode有多个子节点，若调用appendChild()时传入父节点的第一个子节点，则该节点会成为父节点的最后一个子节点</span></span><br><span class="line"><span class="keyword">var</span> returnedNode = someNode.appendChild(someNode.firstChild);</span><br><span class="line">alert(returnedNode == someNode.firstChild); <span class="comment">// false</span></span><br><span class="line">alert(returnedNode == someNode.lastChild);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入到最后一个子节点前面</span></span><br><span class="line">returnedNode = someNode.insertBefore(newNode, someNode.lastChild);</span><br><span class="line">alert(newNode == someNode.childNodes[someNode.childNodes.length<span class="number">-2</span>]);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换最后一个子节点</span></span><br><span class="line">returnedNode = someNode.replaceChild(newNode, someNode.lastChild);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除最后一个子节点</span></span><br><span class="line"><span class="keyword">var</span> formerLastChild = someNode.removeChild(someNode.lastChild);</span><br></pre></td></tr></table></figure>
<h3 id="4-其他方法"><a href="#4-其他方法" class="headerlink" title="4.其他方法"></a>4.其他方法</h3><p>所有类型的节点都有这两个方法：</p>
<ul>
<li><code>cloneNode()</code>用于创建调用该方法的节点的一个完全相同的副本，接受布尔值参数表示是否执行深复制，复制后返回的节点副本属于文档所有，但没有指定父节点；执行深复制（参数为<code>true</code>时）会复制节点及其整个子节点树，执行浅复制只复制节点本身；</li>
<li><code>normalize()</code>方法用于处理文档树中的文本节点，在该节点的后代节点中删除空文本节点，合并相邻文本节点；</li>
</ul>
<p>注：<code>cloneNode()</code>方法不会复制添加到DOM节点中的JavaScript属性（如事件处理程序），该方法只复制特性、子节点，其他一切都不会复制；IE会复制事件处理程序，所以在复制之前最好先移除事件处理程序；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deepList = myList.cloneNode(<span class="literal">true</span>);</span><br><span class="line">alert(deepList.childNodes.length);      <span class="comment">// 3（IE&lt;9）或7（其他浏览器），IE9之前的版本不会为空白符创建节点</span></span><br><span class="line"><span class="keyword">var</span> shallowList = myList.cloneNode(<span class="literal">false</span>);</span><br><span class="line">alert(shallowList.childNodes.length);   <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<h2 id="Document类型"><a href="#Document类型" class="headerlink" title="Document类型"></a>Document类型</h2><p><code>Document</code>类型表示文档，在浏览器中<code>document</code>对象是<code>HTMLDocument</code>（继承自<code>Document</code>类型）的一个实例，表示整个HTML页面；<code>document</code>对象是<code>window</code>对象的属性，因此可将其作为全局对象来访问，<code>Document</code>节点有下列特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">9</span></span><br><span class="line">nodeName值为<span class="string">"#document"</span></span><br><span class="line">nodeValue值为<span class="literal">null</span></span><br><span class="line">parentNode值为<span class="literal">null</span></span><br><span class="line">ownerDocument值为<span class="literal">null</span></span><br><span class="line">其子节点可能是一个DocumentType（最多一个）、Element（最多一个）、ProcessingInstruction或Comment</span><br></pre></td></tr></table></figure>
<p>通过文档对象，不仅可以取得与页面有关的信息，而且还能操作页面的外观及其底层结构；</p>
<h3 id="1-文档的子节点"><a href="#1-文档的子节点" class="headerlink" title="1.文档的子节点"></a>1.文档的子节点</h3><p><code>document.documentElement</code>属性始终指向HTML页面中的<code>&lt;html&gt;</code>元素，<code>document.body</code>属性直接指向<code>&lt;body&gt;</code>元素，通过<code>document.doctype</code>属性可访问<code>DocumentType</code>子节点，即<code>&lt;!DOCTYPE&gt;</code>标签；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="built_in">document</span>.documentElement; <span class="comment">// 取得对&lt;html&gt;的引用</span></span><br><span class="line">alert(html === <span class="built_in">document</span>.childNodes[<span class="number">0</span>]); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> body = <span class="built_in">document</span>.body; <span class="comment">// 取得对&lt;body&gt;的引用</span></span><br><span class="line"><span class="keyword">var</span> doctype = <span class="built_in">document</span>.doctype; <span class="comment">// 取得对&lt;!DOCTYPE&gt;的引用</span></span><br></pre></td></tr></table></figure>
<h3 id="2-文档信息"><a href="#2-文档信息" class="headerlink" title="2.文档信息"></a>2.文档信息</h3><p>作为<code>HTMLDocument</code>的实例，<code>document</code>对象还有一些标准的<code>Document</code>对象所没有的属性：</p>
<ul>
<li><code>document.title</code>属性包含着<code>&lt;title&gt;</code>元素中的文本，可以通过该属性可以修改当前页面的标题，但不会改变<code>&lt;title&gt;</code>元素；</li>
<li><code>document.URL</code>属性包含页面完整的URL；<code>document.domain</code>属性中只包含页面的域名；<code>document.referrer</code>属性保存着链接到当前页面的那个页面URL（无来源页面的情况下，该属性中可能会包含空字符串）；这三个属性中只有<code>document.domain</code>是可以设置的，但不能将属性设置为URL中不包含的域，而且如果域名一开始是“松散的”，就不能将其再设置为“紧绷的”；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设页面来自于p2p.wrox.com 域</span></span><br><span class="line"><span class="built_in">document</span>.domain = <span class="string">"wrox.com"</span>;     <span class="comment">// 松散的（成功）</span></span><br><span class="line"><span class="built_in">document</span>.domain = <span class="string">"p2p.wrox.com"</span>; <span class="comment">// 紧绷的（出错）</span></span><br></pre></td></tr></table></figure>
<h3 id="3-查找元素"><a href="#3-查找元素" class="headerlink" title="3.查找元素"></a>3.查找元素</h3><ul>
<li><code>getElementById()</code>和<code>getElementsByTagName()</code>可以取得元素的引用，<code>getElementById()</code>接收要取得的元素的ID，返回相应元素或<code>null</code>；若页面中多个元素的ID值相同，只返回文档中第一次出现的元素；</li>
<li><code>getElementsByTagName()</code>接受元素的标签名，返回包含零或多个元素的<code>NodeList</code>；在HTML文档中，该方法会返回一个<code>HTMLCollection</code>对象，可以使用方括号语法或<code>item()</code>方法来访问<code>HTMLCollection</code>对象中的项，通过<code>length</code>属性可以取得对象中的元素数量；<code>HTMLCollection</code>对象的<code>namedItem()</code>方法可以通过元素的<code>name</code>特性取得集合中的项；<code>HTMLCollection</code>还支持按名称访问项，对命名的项也可以使用方括号语法来访问；</li>
<li><code>getElementsByName()</code>方法返回带有给定<code>name</code>特性的所有元素（<code>HTMLCollectioin</code>对象），但对单选按钮来说，<code>namedItem()</code>方法只会取得第一项；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">"myimage.gif"</span> name=<span class="string">"myImage"</span>&gt;</span><br><span class="line"><span class="keyword">var</span> images = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</span><br><span class="line"><span class="keyword">var</span> myImage = images.namedItem(<span class="string">"myImage"</span>);</span><br><span class="line"><span class="keyword">var</span> myImage = images[<span class="string">"myImage"</span>];</span><br></pre></td></tr></table></figure>
<p>注：IE8及较低版本不区分ID的大小写，<code>&quot;myDiv&quot;</code>和<code>&quot;mydiv&quot;</code>会被当作相同的元素ID；IE7及较低版本中，name特性与给定ID匹配的表单元素（如<code>&lt;input&gt;</code>）也会被<code>getElementById()</code>返回；</p>
<h3 id="4-特殊集合"><a href="#4-特殊集合" class="headerlink" title="4.特殊集合"></a>4.特殊集合</h3><p><code>document</code>对象的特殊集合都是<code>HTMLCollection</code>对象，为访问文档常用的部分提供了快捷方式，特殊集合始终可以通过<code>HTMLDocument</code>对象访问到：</p>
<ul>
<li><code>document.anchors</code>包含文档中所有带<code>name</code>特性的<code>&lt;a&gt;</code>元素；</li>
<li><code>document.applets</code>包含文档中所有的<code>&lt;applet&gt;</code>元素；</li>
<li><code>document.forms</code>包含文档中所有的<code>&lt;form&gt;</code>元素，与<code>document.getElementsByTagName(&quot;form&quot;)</code>得到的结果相同；</li>
<li><code>document.images</code>包含文档中所有的<code>&lt;img&gt;</code>元素，与<code>document.getElementsByTagName(&quot;img&quot;)</code>得到的结果相同；</li>
<li><code>document.links</code>包含文档中所有带<code>href</code>特性的<code>&lt;a&gt;</code>元素；</li>
</ul>
<h3 id="5-DOM一致性检测"><a href="#5-DOM一致性检测" class="headerlink" title="5.DOM一致性检测"></a>5.DOM一致性检测</h3><p><code>document.implementation</code>属性与浏览器对DOM的实现直接对应，其<code>hasFeature()</code>方法可判定浏览器是否支持给定功能，<code>hasFeature()</code>方法接受两个参数：要检测的DOM功能的名称及版本号，若浏览器支持给定名称和版本的功能则返回<code>true</code>；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasXmlDom = <span class="built_in">document</span>.implementation.hasFeature(<span class="string">"XML"</span>, <span class="string">"1.0"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="6-文档写入"><a href="#6-文档写入" class="headerlink" title="6.文档写入"></a>6.文档写入</h3><p><code>write()</code>和<code>writeln()</code>方法接受要写入到输出流中的文本，<code>write()</code>会原样写入，<code>writeln()</code>会在字符串末尾添加一个换行符（<code>\n</code>）；<code>open()</code>和<code>close()</code>分别用于打开和关闭网页的输出流，如果是在页面加载期间使用<code>write()</code>或<code>writeln()</code>方法，则不需要用到这两个方法；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;<span class="built_in">document</span>.write() Example&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;p&gt;The current date and time is:</span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.write(<span class="string">"&lt;strong&gt;"</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>()).toString() + <span class="string">"&lt;/strong&gt;"</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>p&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<p>注：如果在文档加载结束后再调用<code>document.write()</code>，那么输出的内容将会重写整个页面；</p>
<h2 id="Element类型"><a href="#Element类型" class="headerlink" title="Element类型"></a>Element类型</h2><p><code>Element</code>类型用于表现XML或HTML元素，提供了对元素标签名、子节点及特性的访问；<code>Element</code>节点有以下特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">1</span></span><br><span class="line">nodeName值为元素的标签名</span><br><span class="line">nodeValue值为<span class="literal">null</span></span><br><span class="line">parentNode可能是Document或Element</span><br><span class="line">其子节点可能是Element、Text、Comment、ProcessingInstruction、CDATASection或EntityReference</span><br></pre></td></tr></table></figure>
<p>使用<code>nodeName</code>或<code>tagName</code>属性都可以访问元素的标签名；</p>
<h3 id="1-HTML元素"><a href="#1-HTML元素" class="headerlink" title="1.HTML元素"></a>1.HTML元素</h3><p>所有HTML元素都由<code>HTMLElement</code>类型或者其更具体的子类型表示，该类型直接继承自Element并添加了一些属性：</p>
<ul>
<li><code>id</code>：元素在文档中的唯一标识符；</li>
<li><code>title</code>：有关元素的附加说明信息；</li>
<li><code>lang</code>：元素内容的语言代码；</li>
<li><code>dir</code>：语言的方向，值为”ltr”或”rtl”；</li>
<li><code>className</code>：与元素的class特性对应，即为元素指定的CSS类；</li>
</ul>
<h3 id="2-取得特性"><a href="#2-取得特性" class="headerlink" title="2.取得特性"></a>2.取得特性</h3><p>每个元素都有一或多个特性，用于给出相应元素或其内容的附加信息，<code>getAttribute()</code>、<code>setAttribute()</code>和<code>removeAttribute()</code>可以操作元素的特性；</p>
<ul>
<li><code>getAttribute()</code>方法可以取得元素的相应特性（甚至自定义特性），传入的特性名称是不区分大小写的（且与实际的特性名相同），给定名称的特性若不存在则返回<code>null</code>；</li>
<li>任何元素的所有特性都可以通过DOM元素本身的属性来访问，不过只有非自定义的特性才会以属性的形式添加到DOM对象中；</li>
<li><code>style</code>特性用于通过CSS为元素指定样式，通过<code>getAttribute()</code>访问时返回的<code>style</code>特性值中包含的是CSS文本，通过属性来访问时则返回一个对象；</li>
<li>当在元素上使用时，<code>onclick</code>特性中包含的是JavaScript代码，通过<code>getAttribute()</code>访问时返回相应代码的字符串，在访问<code>onclick</code>属性时返回一个JavaScript函数（若未在元素中指定相应特性则返回<code>null</code>）；</li>
</ul>
<p>注：在IE7及以前版本中，通过<code>getAttribute()</code>方法访问<code>style</code>特性或<code>onclick</code>特性时，返回的值与属性的值相同；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>);</span><br><span class="line">alert(div.getAttribute(<span class="string">"id"</span>)); <span class="comment">// "myDiv"</span></span><br><span class="line">alert(div.id); <span class="comment">// "myDiv"</span></span><br><span class="line">alert(div.my_special_attribute); <span class="comment">// undefined（IE 除外）</span></span><br></pre></td></tr></table></figure>
<h3 id="3-设置特性"><a href="#3-设置特性" class="headerlink" title="3.设置特性"></a>3.设置特性</h3><ul>
<li><code>setAttribute()</code>方法接受两个参数：要设置的特性名和值，若特性已经存在则以指定的值替换现有的值，若特性不存在则创建该属性并设置相应的值；</li>
<li><code>setAttribute()</code>方法既可以操作HTML特性也可以操作自定义特性，该方法设置的特性名会被统一转换为小写形式；</li>
<li>因为所有特性都是属性（不包括自定义属性），所以直接给属性赋值可以设置特性的值；</li>
<li><code>removeAttribute()</code>方法用于彻底删除元素的特性，调用该方法不仅会清除特性的值，而且也会从元素中完全删除特性；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div.setAttribute(<span class="string">"id"</span>, <span class="string">"someOtherId"</span>);</span><br><span class="line">div.id = <span class="string">"someOtherId"</span>;</span><br><span class="line">div.mycolor = <span class="string">"red"</span>;</span><br><span class="line">alert(div.getAttribute(<span class="string">"mycolor"</span>)); <span class="comment">// null（IE 除外）</span></span><br></pre></td></tr></table></figure>
<h3 id="4-attributes属性"><a href="#4-attributes属性" class="headerlink" title="4.attributes属性"></a>4.attributes属性</h3><p><code>Element</code>类型是使用<code>attributes</code>属性的唯一一个DOM节点类型；<code>attributes</code>属性中包含一个<code>NamedNodeMap</code>（与<code>NodeList</code>类似），元素的每一个特性都由一个<code>Attr</code>节点表示，每个节点都保存在<code>NamedNodeMap</code>对象中；<code>NamedNodeMap</code>对象有下列方法：</p>
<ul>
<li><code>getNamedItem(name)</code>：返回<code>nodeName</code>属性等于<code>name</code>的节点；</li>
<li><code>removeNamedItem(name)</code>：从列表中移除<code>nodeName</code>属性等于<code>name</code>的节点；</li>
<li><code>setNamedItem(node)</code>：向列表中添加节点，以节点的<code>nodeName</code>属性为索引；</li>
<li><code>item(pos)</code>：返回位于数字<code>pos</code>位置处的节点；</li>
</ul>
<p><code>attributes</code>属性中包含一系列节点，每个节点的<code>nodeName</code>就是特性的名称，节点的<code>nodeValue</code>就是特性的值；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = element.attributes.getNamedItem(<span class="string">"id"</span>).nodeValue;</span><br><span class="line"><span class="keyword">var</span> id = element.attributes[<span class="string">"id"</span>].nodeValue; <span class="comment">// 使用方括号语法通过特性名称访问节点的简写方式</span></span><br></pre></td></tr></table></figure>
<p>调用<code>removeNamedItem()</code>方法与在元素上调用<code>removeAttribute()</code>方法的效果相同——直接删除具有给定名称的特性，唯一的区别是<code>removeNamedItem()</code>返回表示被删除特性的<code>Attr</code>节点；<code>setNamedItem()</code>方法可以为元素添加新特性，需要传入一个特性节点；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldAttr = element.attributes.removeNamedItem(<span class="string">"id"</span>);</span><br><span class="line">element.attributes.setNamedItem(newAttr);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历元素的特性，构造成name="value"的字符串格式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outputAttributes</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> pairs = <span class="keyword">new</span> <span class="built_in">Array</span>(), attrName, attrValue, i, len;</span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>, len=element.attributes.length; i &lt; len; i++)&#123;</span><br><span class="line">    attrName = element.attributes[i].nodeName;</span><br><span class="line">    attrValue = element.attributes[i].nodeValue;</span><br><span class="line">    <span class="keyword">if</span> (element.attributes[i].specified) &#123;</span><br><span class="line">      pairs.push(attrName + <span class="string">"=\""</span> + attrValue + <span class="string">"\""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> pairs.join(<span class="string">" "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-创建元素"><a href="#5-创建元素" class="headerlink" title="5.创建元素"></a>5.创建元素</h3><p><code>document.createElement()</code>方法可以创建新元素，接受一个参数：要创建元素的标签名；该标签名在HTML文档中不区分大小写，而在XML（包括XHTML）文档中区分大小写的；<code>createElement()</code>方法创建新元素的同时，也为其设置了<code>ownerDocuemnt</code>属性，还可以操作元素的特性，添加更多子节点，以及执行其他操作；<br>也可以为<code>createElement()</code>方法传入完整的元素标签（包含属性），但仅IE支持这种用法；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">div.id = <span class="string">"myNewDiv"</span>;</span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"&lt;div id=\"myNewDiv\" class=\"box\"&gt;&lt;/div &gt;"</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(div);</span><br></pre></td></tr></table></figure>
<h3 id="6-元素的子节点"><a href="#6-元素的子节点" class="headerlink" title="6.元素的子节点"></a>6.元素的子节点</h3><p>元素的<code>childNodes</code>属性中包含了所有子节点，子节点有可能是元素、文本节点、注释或处理指令；元素也支持<code>getElementsByTagName()</code>方法，在通过元素调用该方法时，搜索起点是当前元素，结果返回当前元素的后代；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 防止对空白文本节点做操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, len=element.childNodes.length; i &lt; len; i++)&#123;</span><br><span class="line">  <span class="keyword">if</span> (element.childNodes[i].nodeType == <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// 执行某些操作</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">"myList"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"myList"</span>);</span><br><span class="line"><span class="keyword">var</span> items = ul.getElementsByTagName(<span class="string">"li"</span>); <span class="comment">// 取得&lt;ul&gt;元素中包含的所有&lt;li&gt;元素</span></span><br></pre></td></tr></table></figure>
<h2 id="Text类型"><a href="#Text类型" class="headerlink" title="Text类型"></a>Text类型</h2><p>文本节点由<code>Text</code>类型表示，包含的是纯文本内容，纯文本中可以包含转义后的HTML字符，但不能包含HTML代码；<code>Text</code>节点有以下特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">3</span></span><br><span class="line">nodeName值为<span class="string">"#text"</span></span><br><span class="line">nodeValue值为节点所包含的文本</span><br><span class="line">parentNode是一个Element</span><br><span class="line">不支持（没有）子节点</span><br></pre></td></tr></table></figure>
<p>通过<code>nodeValue</code>或<code>data</code>属性可以访问<code>Text</code>节点中包含的文本，下列方法可以操作节点中的文本：</p>
<ul>
<li><code>appendData(text)</code>：将<code>text</code>添加到节点的末尾；</li>
<li><code>deleteData(offset, count)</code>：从<code>offset</code>指定的位置开始删除<code>count</code>个字符；</li>
<li><code>insertData(offset, text)</code>：在<code>offset</code>指定的位置插入<code>text</code>；</li>
<li><code>replaceData(offset, count, text)</code>：用<code>text</code>替换从<code>offset</code>位置开始长度为<code>count</code>的文本；</li>
<li><code>splitText(offset)</code>：从<code>offset</code>指定的位置将当前文本节点分成两个文本节点；</li>
<li><code>substringData(offset, count)</code>：提取从<code>offset</code>位置开始长度为<code>count</code>的字符串；</li>
</ul>
<p>文本节点的<code>length</code>属性保存着节点中字符的数目，<code>nodeValue.length</code>和<code>data.length</code>中也存有同样的值；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;Hello World!<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">var</span> textNode = div.firstChild; <span class="comment">// 或div.childNodes[0]</span></span><br><span class="line">div.firstChild.nodeValue = <span class="string">"Some other message"</span>;</span><br><span class="line"><span class="comment">// 此时的字符串会经过HTML编码，输出结果是"Some &amp;lt;strong&amp;gt;other&amp;lt;/strong&amp;gt; message"</span></span><br><span class="line">div.firstChild.nodeValue = <span class="string">"Some &lt;strong&gt;other&lt;/strong&gt; message"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="1-创建文本节点"><a href="#1-创建文本节点" class="headerlink" title="1.创建文本节点"></a>1.创建文本节点</h3><p><code>document.createTextNode()</code>方法用于创建新文本节点，接受要插入节点中的文本；与设置已有文本节点的值一样，作为参数的文本也将按照HTML或XML的格式进行编码；在创建新文本节点的同时，也会为其设置<code>ownerDocument</code>属性；<br>若两个文本节点是相邻的同胞节点，则两个节点中的文本会连起来显示；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var element = document.createElement(&quot;div&quot;);</span><br><span class="line">element.className = &quot;message&quot;;</span><br><span class="line">var textNode = document.createTextNode(&quot;&lt;strong&gt;Hello&lt;/strong&gt; world!&quot;);</span><br><span class="line">element.appendChild(textNode);</span><br><span class="line">document.body.appendChild(element);</span><br></pre></td></tr></table></figure>
<h3 id="2-规范化文本节点"><a href="#2-规范化文本节点" class="headerlink" title="2.规范化文本节点"></a>2.规范化文本节点</h3><p><code>Node</code>类型定义的<code>normalize()</code>方法会将所有文本节点合并成一个节点，结果节点的<code>nodeValue</code>等于每个文本节点的<code>nodeValue</code>值拼接起来的值；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// element有两个文本节点</span></span><br><span class="line">alert(element.childNodes.length); <span class="comment">// 2</span></span><br><span class="line">element.normalize();</span><br><span class="line">alert(element.childNodes.length); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="3-分隔文本节点"><a href="#3-分隔文本节点" class="headerlink" title="3.分隔文本节点"></a>3.分隔文本节点</h3><p><code>splitText()</code>方法能将一个文本节点分成两个文本节点，即按照指定的位置分割<code>nodeValue</code>值；原来的文本节点将包含从开始到指定位置之前的内容，新文本节点将包含剩下的文本；该方法会返回一个新文本节点，该节点与原节点的parentNode相同；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newNode = element.firstChild.splitText(<span class="number">5</span>);</span><br><span class="line">alert(element.firstChild.nodeValue); <span class="comment">// "Hello"</span></span><br><span class="line">alert(newNode.nodeValue); <span class="comment">// " world!"</span></span><br><span class="line">alert(element.childNodes.length); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h2 id="其他类型"><a href="#其他类型" class="headerlink" title="其他类型"></a>其他类型</h2><h3 id="1-Comment类型"><a href="#1-Comment类型" class="headerlink" title="1.Comment类型"></a>1.Comment类型</h3><p>注释在DOM中通过<code>Comment</code>类型表示，<code>Comment</code>节点有下列特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">8</span></span><br><span class="line">nodeName值为<span class="string">"#comment"</span></span><br><span class="line">nodeValue值是注释的内容</span><br><span class="line">parentNode可能是Document或Element</span><br><span class="line">不支持（没有）子节点</span><br></pre></td></tr></table></figure>
<p><code>Comment</code>类型与<code>Text</code>类型继承自相同基类，因此其拥有除<code>splitText()</code>之外的所有字符串操作方法；与<code>Text</code>类型相似，可通过<code>nodeValue</code>或<code>data</code>属性取得注释内容；使用<code>document.createComment()</code>并为其传递注释文本可以创建注释节点；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> comment = <span class="built_in">document</span>.createComment(<span class="string">"A comment "</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-CDATASection类型"><a href="#2-CDATASection类型" class="headerlink" title="2.CDATASection类型"></a>2.CDATASection类型</h3><p><code>CDATASection</code>类型只针对基于XML文档的CDATA区域，<code>CDATASection</code>节点有下列特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">4</span></span><br><span class="line">nodeName值为<span class="string">"\#cdata-section"</span></span><br><span class="line">nodeValue值是CDATA区域中的内容</span><br><span class="line">parentNode可能是Document或Element</span><br><span class="line">不支持（没有）子节点</span><br></pre></td></tr></table></figure>
<p><code>CDATASection</code>类型继承自<code>Text</code>类型，拥有除<code>splitText()</code>之外的所有字符串操作方法； 在真正的XML文档中，使用<code>document.createCDataSection()</code>并为其传入节点的内容可创建CDATA区域；</p>
<h3 id="3-DocumentType类型"><a href="#3-DocumentType类型" class="headerlink" title="3.DocumentType类型"></a>3.DocumentType类型</h3><p>仅Firefox/Safari/Opera支持，<code>DocumentType</code>包含与文档的<code>doctype</code>有关的所有信息：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">10</span></span><br><span class="line">nodeName值为doctype的名称</span><br><span class="line">nodeValue值为<span class="literal">null</span></span><br><span class="line">parentNode是Document</span><br><span class="line">不支持（没有）子节点</span><br></pre></td></tr></table></figure>
<p>在DOM1级中，<code>DocumentType</code>对象不能动态创建，只能通过解析文档代码的方式来创建，支持的浏览器会把<code>DocumentType</code>对象保存在<code>document.doctype</code>中；<code>DocumentType</code>的<code>name</code>属性表示文档类型的名称（即在<code>&lt;!DOCTYPE</code>之后的文本），<code>entities</code>属性是由文档类型描述的实体的<code>NamedNodeMap</code>对象，<code>notations</code>属性是由文档类型描述的符号的<code>NamedNodeMap</code>对象；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01//EN"</span> <span class="string">"http://www.w3.org/TR/html4/strict.dtd"</span>&gt;</span><br><span class="line">alert(<span class="built_in">document</span>.doctype.name); <span class="comment">// "HTML"</span></span><br></pre></td></tr></table></figure>
<p>注：IE8及更早版本不支持<code>DocumentType</code>，因此<code>document.doctype</code>的值始终为<code>null</code>，但会把文档类型声明错误地解释为注释，并为其创建一个注释节点；IE9会给<code>document.doctype</code>赋正确的对象，但仍不支持访问<code>DocumentType</code>类型；</p>
<h3 id="4-DocumentFragment类型"><a href="#4-DocumentFragment类型" class="headerlink" title="4.DocumentFragment类型"></a>4.DocumentFragment类型</h3><p>文档片段是一种“轻量级”的文档，可以包含和控制节点，但不会像完整的文档那样占用额外的资源；<code>DocumentFragment</code>节点有下列特征：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">11</span></span><br><span class="line">nodeName值为<span class="string">"#document-fragment"</span></span><br><span class="line">nodeValue值为<span class="literal">null</span></span><br><span class="line">parentNode值为<span class="literal">null</span></span><br><span class="line">子节点可以是Element、ProcessingInstruction、Comment、Text、CDATASection或EntityReference</span><br></pre></td></tr></table></figure>
<p>可以在文档片段里面保存将来可能会添加到文档中的节点，使用<code>document.createDocumentFragment()</code>方法创建文档片段；</p>
<p>若将文档中的节点添加到文档片段中，则会从文档树中移除该节点；添加到文档片段中的新节点同样也不属于文档树，可以通过<code>appendChild()</code>或<code>insertBefore()</code>将文档片段中内容添加到文档中；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"myList"</span>);</span><br><span class="line"><span class="keyword">var</span> li = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">  li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">  li.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Item "</span> + (i+<span class="number">1</span>)));</span><br><span class="line">  fragment.appendChild(li);</span><br><span class="line">&#125;</span><br><span class="line">ul.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<h3 id="5-Attr类型"><a href="#5-Attr类型" class="headerlink" title="5.Attr类型"></a>5.Attr类型</h3><p>元素的特性以<code>Attr</code>类型来表示，在所有浏览器中都可以访问<code>Attr</code>类型的构造函数和原型，特性就是存在于元素的<code>attributes</code>属性中的节点；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nodeType值为<span class="number">2</span></span><br><span class="line">nodeName值是特性的名称</span><br><span class="line">nodeValue值是特性的值</span><br><span class="line">parentNode值为<span class="literal">null</span></span><br><span class="line">在HTML中不支持（没有）子节点</span><br><span class="line">在XML中子节点可以是Text或EntityReference</span><br></pre></td></tr></table></figure>
<p><code>Attr</code>对象的<code>name</code>属性是特性名称（与<code>nodeName</code>值相同），<code>value</code>属性是特性的值（与<code>nodeValue</code>值相同），<code>specified</code>属性是一个布尔值，用以区别特性是在代码中指定的还是默认的；<br>使用<code>document.createAttribute()</code>并传入特性的名称可以创建新的特性节点；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> attr = <span class="built_in">document</span>.createAttribute(<span class="string">"align"</span>);</span><br><span class="line">attr.value = <span class="string">"left"</span>;</span><br><span class="line">element.setAttributeNode(attr);</span><br><span class="line">alert(element.attributes[<span class="string">"align"</span>].value); <span class="comment">// "left"</span></span><br><span class="line">alert(element.getAttributeNode(<span class="string">"align"</span>).value); <span class="comment">// "left"</span></span><br><span class="line">alert(element.getAttribute(<span class="string">"align"</span>)); <span class="comment">// "left"</span></span><br></pre></td></tr></table></figure>
<p>添加特性后，可通过下列方式访问该特性：<code>attributes</code>属性、<code>getAttributeNode()</code>方法及<code>getAttribute()</code>方法；其中<code>attributes</code>和<code>getAttributeNode()</code>返回对应特性的<code>Attr</code>节点，<code>getAttribute()</code>只返回特性的值；</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/JavaScript高级程序设计/" rel="tag"># JavaScript高级程序设计</a>
          
            <a href="/tags/DOM/" rel="tag"># DOM</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/11/30/bom/" rel="next" title="BOM">
                <i class="fa fa-chevron-left"></i> BOM
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/10/jquery-selector/" rel="prev" title="jQuery中的选择器">
                jQuery中的选择器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ZhiGuang Xiong</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ZhiGuangXiong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhiguangxiong@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Node类型"><span class="nav-number">1.</span> <span class="nav-text">Node类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-nodeName和nodeValue属性"><span class="nav-number">1.1.</span> <span class="nav-text">1.nodeName和nodeValue属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-节点层次"><span class="nav-number">1.2.</span> <span class="nav-text">2.节点层次</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-操作节点"><span class="nav-number">1.3.</span> <span class="nav-text">3.操作节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-其他方法"><span class="nav-number">1.4.</span> <span class="nav-text">4.其他方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Document类型"><span class="nav-number">2.</span> <span class="nav-text">Document类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-文档的子节点"><span class="nav-number">2.1.</span> <span class="nav-text">1.文档的子节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-文档信息"><span class="nav-number">2.2.</span> <span class="nav-text">2.文档信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-查找元素"><span class="nav-number">2.3.</span> <span class="nav-text">3.查找元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-特殊集合"><span class="nav-number">2.4.</span> <span class="nav-text">4.特殊集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-DOM一致性检测"><span class="nav-number">2.5.</span> <span class="nav-text">5.DOM一致性检测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-文档写入"><span class="nav-number">2.6.</span> <span class="nav-text">6.文档写入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Element类型"><span class="nav-number">3.</span> <span class="nav-text">Element类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-HTML元素"><span class="nav-number">3.1.</span> <span class="nav-text">1.HTML元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-取得特性"><span class="nav-number">3.2.</span> <span class="nav-text">2.取得特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-设置特性"><span class="nav-number">3.3.</span> <span class="nav-text">3.设置特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-attributes属性"><span class="nav-number">3.4.</span> <span class="nav-text">4.attributes属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-创建元素"><span class="nav-number">3.5.</span> <span class="nav-text">5.创建元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-元素的子节点"><span class="nav-number">3.6.</span> <span class="nav-text">6.元素的子节点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Text类型"><span class="nav-number">4.</span> <span class="nav-text">Text类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-创建文本节点"><span class="nav-number">4.1.</span> <span class="nav-text">1.创建文本节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-规范化文本节点"><span class="nav-number">4.2.</span> <span class="nav-text">2.规范化文本节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-分隔文本节点"><span class="nav-number">4.3.</span> <span class="nav-text">3.分隔文本节点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他类型"><span class="nav-number">5.</span> <span class="nav-text">其他类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Comment类型"><span class="nav-number">5.1.</span> <span class="nav-text">1.Comment类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-CDATASection类型"><span class="nav-number">5.2.</span> <span class="nav-text">2.CDATASection类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-DocumentType类型"><span class="nav-number">5.3.</span> <span class="nav-text">3.DocumentType类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-DocumentFragment类型"><span class="nav-number">5.4.</span> <span class="nav-text">4.DocumentFragment类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Attr类型"><span class="nav-number">5.5.</span> <span class="nav-text">5.Attr类型</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhiGuang Xiong</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
